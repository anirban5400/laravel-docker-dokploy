# =============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION FOR NIXPACKS DEPLOYMENT ON DOKPLOY
# =============================================================================
# Copy this file content to your Dokploy environment variables section
# Replace placeholder values with your actual production values
# =============================================================================

# Application Configuration
APP_NAME="Laravel Docker Dokploy"
APP_ENV=production
APP_KEY=base64:YOUR_GENERATED_APP_KEY_HERE
APP_DEBUG=false
APP_TIMEZONE=UTC
APP_URL=https://your-production-domain.com

# =============================================================================
# EXTERNAL DATABASE CONFIGURATION (REQUIRED)
# =============================================================================

# External MySQL Database (REQUIRED - Replace with your MySQL details)
DB_CONNECTION=mysql
DB_HOST=your-mysql-server.com
DB_PORT=3306
DB_DATABASE=your_production_database
DB_USERNAME=your_mysql_username
DB_PASSWORD=your_secure_mysql_password

# External MongoDB Database (REQUIRED - Replace with your MongoDB details)
MONGODB_HOST=your-mongodb-server.com
MONGODB_PORT=27017
MONGODB_DATABASE=your_production_mongodb
MONGODB_USERNAME=your_mongodb_username
MONGODB_PASSWORD=your_secure_mongodb_password
MONGODB_AUTH_SOURCE=admin

# =============================================================================
# REDIS CONFIGURATION (Nixpacks optimized)
# =============================================================================

# Redis for Cache, Sessions, and Queues
CACHE_STORE=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis

# Redis Connection (Use external Redis or Dokploy's Redis service)
REDIS_CLIENT=predis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your_secure_redis_password
REDIS_DB=0
REDIS_CACHE_DB=1
REDIS_PREFIX=laravel_prod_

# Session Configuration
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=.your-production-domain.com

# =============================================================================
# LARAVEL REVERB (WEBSOCKET) CONFIGURATION
# =============================================================================

# Broadcasting
BROADCAST_CONNECTION=reverb

# Reverb WebSocket Server Configuration
REVERB_APP_ID=production-app
REVERB_APP_KEY=your_production_reverb_app_key
REVERB_APP_SECRET=your_production_reverb_app_secret
REVERB_HOST=your-production-domain.com
REVERB_PORT=443
REVERB_SCHEME=https

# Reverb Server Internal Configuration (Nixpacks handled)
REVERB_SERVER_HOST=0.0.0.0
REVERB_SERVER_PORT=8080

# Frontend Vite Configuration
VITE_REVERB_APP_KEY="${REVERB_APP_KEY}"
VITE_REVERB_HOST="${REVERB_HOST}"
VITE_REVERB_PORT="${REVERB_PORT}"
VITE_REVERB_SCHEME="${REVERB_SCHEME}"

# =============================================================================
# LARAVEL HORIZON (QUEUE MANAGEMENT) CONFIGURATION
# =============================================================================

HORIZON_DOMAIN=your-production-domain.com
HORIZON_PATH=horizon

# Queue Configuration
QUEUE_FAILED_DRIVER=database-uuids

# =============================================================================
# PRODUCTION LOGGING (Nixpacks optimized)
# =============================================================================

# Logging Configuration (Optimized for Nixpacks/Dokploy)
LOG_CHANNEL=stderr
LOG_LEVEL=error
LOG_DEPRECATIONS_CHANNEL=null

# =============================================================================
# MAIL CONFIGURATION (Production SMTP)
# =============================================================================

MAIL_MAILER=smtp
MAIL_HOST=your-smtp-server.com
MAIL_PORT=587
MAIL_USERNAME=your_smtp_username
MAIL_PASSWORD=your_smtp_password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@your-production-domain.com
MAIL_FROM_NAME="${APP_NAME}"

# =============================================================================
# PERFORMANCE & SECURITY SETTINGS (Production optimized)
# =============================================================================

# Cache Configuration
CACHE_PREFIX=laravel_prod_cache

# File Storage (if using cloud storage)
FILESYSTEM_DISK=local

# AWS S3 Configuration (if using S3 for file storage)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=your-production-bucket
AWS_USE_PATH_STYLE_ENDPOINT=false

# =============================================================================
# NIXPACKS SPECIFIC OPTIMIZATIONS
# =============================================================================

# PHP Configuration (Nixpacks will use these)
PHP_MEMORY_LIMIT=256M
PHP_MAX_EXECUTION_TIME=300
PHP_UPLOAD_MAX_FILESIZE=64M
PHP_POST_MAX_SIZE=64M

# Composer Configuration (for Nixpacks build)
COMPOSER_ALLOW_SUPERUSER=1
COMPOSER_NO_INTERACTION=1

# =============================================================================
# MONITORING & DEBUGGING (Production safe)
# =============================================================================

# Laravel Telescope (disable in production for performance)
TELESCOPE_ENABLED=false

# Laravel Pulse (for monitoring - optional)
PULSE_ENABLED=true

# Health Check Configuration
HEALTH_CHECK_URL=/up

# =============================================================================
# IMPORTANT NOTES FOR DOKPLOY DEPLOYMENT:
# =============================================================================
# 1. Generate APP_KEY: php artisan key:generate --show
# 2. Generate Reverb keys: Use random 32-character strings
# 3. Replace all "your-*" placeholders with actual values
# 4. Set Redis password to a strong random string
# 5. Ensure external databases are accessible from Dokploy server
# 6. Domain should match your Dokploy domain configuration
# =============================================================================
